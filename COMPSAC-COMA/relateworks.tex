\section{Related Work}
\label{sec:relateworks}
For simulating CPS in \cite{GeorgMRW14}, they propose to integrate some distinct simulation domains for a comprehensive analysis of the interdependent subsystems. As a promising technique, co-simulation \cite{Bogomolov2015Co} can maintain all system models within their specialized simulators and synchronizes them in order to coherently integrate the simulation domains. FMI \cite{Blochwitz2011The}\cite{FMI2INTRO} is an industry standard which enables co-simulation of complex heterogeneous systems using multiple simulation engines. It has been adopted by the industry and academic. For example, J. Bastian et al. adopts fixed step size MA to simulate heterogeneous systems in \cite{Bastian2011Master}.
D. Broman et al. discussed the determinate composition of FMUs for co-simulation in \cite{BromanBGLMTW13}. They extended the FMI standard to design FMUs that enables deterministic execution for a broader class of models. Besides, rollback and predictable step size MAs are proposed in their work. In \cite{CremonaLTBL16}, F. Cremona et al. presents FIDE, an Integrated Development Environment (IDE) for building applications using FMUs. 

In our recent work, we have implemented the prototype \textit{co-simulator} for continuous-time Markov chains (CTMCs) \cite{DanosHGS17}, discrete-time Markov chains (DTMCs) \cite{Guerry13} and Modelica models in \cite{LiuJWCD16}. We also proposed an improved co-simulation framework that focuses on the capture of the nearest future event to reduce the number of running steps and the frequency of data exchange between models. In short, the existing work focus on how to achieve deterministic execution of FMUs and improve the efficiency of MAs, however, there is few work to analyse MAs with formal methods.

Before the FMI-based co-simualtion of the heterogeneous system, we should verify the coordination of the components in the system. There are some related works ahout coordination and the verification of FMI. F. Arbab et al. proposed a channel-based coordination model for component composition in \cite{Arbab2002Reo}. S. Dziwok et al proposed specification and verification for real-time coordination protocols of cyber-physical systems in \cite{Dziwok17}. P.G Larsen et al. \cite{Larsen2016Integrated} presented formal semantics of the FMI described in the formal specification language CSP. They formally analyse the CSP model with the FDR3 refinement checker. N. Amalio et al. \cite{AmalioPCW16} presented an approach to verify both healthiness and well-formedness of an architecture design modeled with SysML. They attempt to check the conformity of component connectors and the absence of algebraic loops to ensure the co-simulation convergence.
In \cite{SkelinWOHL15}, M. Skelin et al. reports on the translation of the FSM-SADF formalism to TA that enables a more general verification than currently supported by existing tools. S. Tripakis \cite{Tripakis15} discussed the principles for encoding different modeling formalisms, including state machines (both untimed and timed), discrete-event systems, and synchronous data flow, as FMUs. 
\textbf{Compared to the existing work}, the novelty of our approach is that it verifies the coordination of CPS with TA. The execution of FMU and co-simulation is time related. It is naturally to use TA, due to its powerful ability of specifying time and extensive tool support.


